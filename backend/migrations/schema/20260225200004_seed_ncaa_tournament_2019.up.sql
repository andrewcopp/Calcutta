SET search_path = '';

INSERT INTO core.seasons (year) VALUES (2019)
ON CONFLICT (year) DO NOTHING;

INSERT INTO core.tournaments (competition_id, season_id, import_key, rounds, starting_at,
  final_four_top_left, final_four_bottom_left, final_four_top_right, final_four_bottom_right)
SELECT c.id, s.id, 'ncaa-tournament-2019', 7, '2019-03-21T11:15:00-05:00',
  NULLIF('East', ''), NULLIF('West', ''), NULLIF('South', ''), NULLIF('Midwest', '')
FROM core.competitions c, core.seasons s
WHERE c.name = 'NCAA Tournament' AND s.year = 2019
ON CONFLICT (import_key) WHERE deleted_at IS NULL DO NOTHING;

INSERT INTO core.teams (tournament_id, school_id, seed, region, byes, wins, is_eliminated)
SELECT t.id, s.id, v.seed, v.region, v.byes, v.wins, v.is_eliminated
FROM (VALUES
  ('abilene-christian', 15, 'Midwest', 1, 0, true),
  ('arizona-state', 11, 'West', 0, 1, true),
  ('auburn', 5, 'Midwest', 1, 4, true),
  ('baylor', 9, 'West', 1, 1, true),
  ('belmont', 11, 'East', 0, 1, true),
  ('bradley', 15, 'East', 1, 0, true),
  ('buffalo', 6, 'West', 1, 1, true),
  ('cincinnati', 7, 'South', 1, 0, true),
  ('colgate', 15, 'South', 1, 0, true),
  ('duke', 1, 'East', 1, 3, true),
  ('fdu', 16, 'West', 0, 1, true),
  ('florida', 10, 'West', 1, 1, true),
  ('florida-state', 4, 'West', 1, 2, true),
  ('gardner-webb', 16, 'South', 1, 0, true),
  ('georgia-state', 14, 'Midwest', 1, 0, true),
  ('gonzaga', 1, 'West', 1, 3, true),
  ('houston', 3, 'Midwest', 1, 2, true),
  ('iona', 16, 'Midwest', 1, 0, true),
  ('iowa', 10, 'South', 1, 1, true),
  ('iowa-state', 6, 'Midwest', 1, 0, true),
  ('kansas', 4, 'Midwest', 1, 1, true),
  ('kansas-state', 4, 'South', 1, 0, true),
  ('kentucky', 2, 'Midwest', 1, 3, true),
  ('liberty', 12, 'East', 1, 1, true),
  ('louisiana-state', 3, 'East', 1, 2, true),
  ('louisville', 7, 'East', 1, 0, true),
  ('marquette', 5, 'West', 1, 0, true),
  ('maryland', 6, 'East', 1, 1, true),
  ('michigan', 2, 'West', 1, 2, true),
  ('michigan-state', 2, 'East', 1, 4, true),
  ('minnesota', 10, 'East', 1, 1, true),
  ('mississippi', 8, 'South', 1, 0, true),
  ('mississippi-state', 5, 'East', 1, 0, true),
  ('montana', 15, 'West', 1, 0, true),
  ('murray-state', 12, 'West', 1, 1, true),
  ('nevada', 7, 'West', 1, 0, true),
  ('new-mexico-state', 12, 'Midwest', 1, 0, true),
  ('north-carolina', 1, 'Midwest', 1, 2, true),
  ('north-carolina-central', 16, 'East', 0, 0, true),
  ('north-dakota-state', 16, 'East', 0, 1, true),
  ('northeastern', 13, 'Midwest', 1, 0, true),
  ('northern-kentucky', 14, 'West', 1, 0, true),
  ('ohio-state', 11, 'Midwest', 1, 1, true),
  ('oklahoma', 9, 'South', 1, 1, true),
  ('old-dominion', 14, 'South', 1, 0, true),
  ('oregon', 12, 'South', 1, 2, true),
  ('prairie-view', 16, 'West', 0, 0, true),
  ('purdue', 3, 'South', 1, 3, true),
  ('saint-louis', 13, 'East', 1, 0, true),
  ('saint-mary-s-ca', 11, 'South', 1, 0, true),
  ('seton-hall', 10, 'Midwest', 1, 0, true),
  ('st-john-s-ny', 11, 'West', 0, 0, true),
  ('syracuse', 8, 'West', 1, 0, true),
  ('temple', 11, 'East', 0, 0, true),
  ('tennessee', 2, 'South', 1, 2, true),
  ('texas-tech', 3, 'West', 1, 5, true),
  ('uc-irvine', 13, 'South', 1, 1, true),
  ('ucf', 9, 'East', 1, 1, true),
  ('utah-state', 8, 'Midwest', 1, 0, true),
  ('vermont', 13, 'West', 1, 0, true),
  ('villanova', 6, 'South', 1, 1, true),
  ('virginia', 1, 'South', 1, 6, false),
  ('virginia-commonwealth', 8, 'East', 1, 0, true),
  ('virginia-tech', 4, 'East', 1, 2, true),
  ('washington', 9, 'Midwest', 1, 1, true),
  ('wisconsin', 5, 'South', 1, 0, true),
  ('wofford', 7, 'Midwest', 1, 1, true),
  ('yale', 14, 'East', 1, 0, true)
) AS v(school_slug, seed, region, byes, wins, is_eliminated)
JOIN core.tournaments t ON t.import_key = 'ncaa-tournament-2019' AND t.deleted_at IS NULL
JOIN core.schools s ON s.slug = v.school_slug AND s.deleted_at IS NULL
ON CONFLICT (tournament_id, school_id) WHERE deleted_at IS NULL DO NOTHING;

INSERT INTO core.team_kenpom_stats (team_id, net_rtg, o_rtg, d_rtg, adj_t)
SELECT tm.id, v.net_rtg, v.o_rtg, v.d_rtg, v.adj_t
FROM (VALUES
  ('abilene-christian', 2.09, 103.6, 101.5, 66),
  ('arizona-state', 11.21, 109.8, 98.6, 70.5),
  ('auburn', 23.33, 119.6, 96.2, 67.5),
  ('baylor', 15.29, 113.5, 98.2, 65.2),
  ('belmont', 13.08, 114.9, 101.8, 71.1),
  ('bradley', -0.36, 100.9, 101.3, 65),
  ('buffalo', 20.33, 114.9, 94.6, 73.7),
  ('cincinnati', 17.05, 111.6, 94.5, 63.2),
  ('colgate', 4.29, 110, 105.7, 66.3),
  ('duke', 31.99, 120.1, 88.1, 72.2),
  ('fdu', -4.24, 106.2, 110.4, 66.7),
  ('florida', 18.33, 110.2, 91.9, 62.7),
  ('florida-state', 22.56, 113, 90.4, 68.2),
  ('gardner-webb', -0.74, 107.5, 108.2, 67.1),
  ('georgia-state', 5.6, 107.9, 102.3, 69.8),
  ('gonzaga', 32.79, 125.1, 92.3, 69.7),
  ('houston', 22.43, 114.1, 91.7, 66.1),
  ('iona', -3.13, 106.5, 109.6, 70.5),
  ('iowa', 15.96, 117.2, 101.2, 69.3),
  ('iowa-state', 21.85, 119, 97.2, 67.6),
  ('kansas', 20.71, 112.8, 92, 69.9),
  ('kansas-state', 20.22, 108, 87.7, 63),
  ('kentucky', 27.42, 118.2, 90.8, 65.8),
  ('liberty', 10.87, 110.6, 99.7, 61.7),
  ('louisiana-state', 20.97, 118.5, 97.5, 69.8),
  ('louisville', 20.97, 113.4, 92.4, 67.1),
  ('marquette', 18.42, 114.2, 95.7, 68.6),
  ('maryland', 19.98, 113.8, 93.8, 65.6),
  ('michigan', 29.44, 115.5, 86.1, 64.4),
  ('michigan-state', 31.36, 121.7, 90.4, 67.4),
  ('minnesota', 14.46, 110.7, 96.2, 67.4),
  ('mississippi', 15.09, 112.8, 97.7, 68.3),
  ('mississippi-state', 20.68, 117.4, 96.7, 67.4),
  ('montana', 3.55, 107.4, 103.8, 66.5),
  ('murray-state', 13.34, 112, 98.7, 69),
  ('nevada', 18.92, 114, 95.1, 69.2),
  ('new-mexico-state', 13.59, 112.6, 99, 65.6),
  ('north-carolina', 29.17, 119.9, 90.7, 74.3),
  ('north-carolina-central', -11.89, 96.6, 108.5, 65.2),
  ('north-dakota-state', -3.2, 106.6, 109.8, 64.8),
  ('northeastern', 8.74, 111.5, 102.7, 66),
  ('northern-kentucky', 6.56, 109.2, 102.7, 67.9),
  ('ohio-state', 15.08, 109.3, 94.2, 65.7),
  ('oklahoma', 15.54, 109.4, 93.9, 68.6),
  ('old-dominion', 5.58, 101.9, 96.4, 64.3),
  ('oregon', 15.15, 107.7, 92.6, 64),
  ('prairie-view', -4.31, 101.5, 105.8, 70.9),
  ('purdue', 26.05, 121.1, 95, 65.6),
  ('saint-louis', 6.27, 102.6, 96.3, 66),
  ('saint-mary-s-ca', 17.71, 114.6, 96.9, 62.6),
  ('seton-hall', 12.91, 109.3, 96.4, 68.9),
  ('st-john-s-ny', 8.75, 109.7, 100.9, 70.5),
  ('syracuse', 16.3, 110.2, 93.9, 66),
  ('temple', 9.39, 108.9, 99.5, 68.7),
  ('tennessee', 26.98, 122.5, 95.5, 67.7),
  ('texas-tech', 26.75, 112.7, 86, 66.5),
  ('uc-irvine', 9.46, 106.6, 97.2, 65.1),
  ('ucf', 14.58, 110.3, 95.7, 64.8),
  ('utah-state', 16.62, 113, 96.4, 67.8),
  ('vermont', 8.71, 108, 99.2, 65.3),
  ('villanova', 18.77, 117, 98.2, 63.6),
  ('virginia', 35.66, 123.6, 87.9, 59.2),
  ('virginia-commonwealth', 15.69, 104.3, 88.6, 68.2),
  ('virginia-tech', 24.47, 118.4, 94, 63.2),
  ('washington', 13.37, 107, 93.6, 65.8),
  ('wisconsin', 23.68, 110.8, 87.1, 63.6),
  ('wofford', 20.72, 118.4, 97.6, 65.6),
  ('yale', 8.58, 111.7, 103.1, 70.7)
) AS v(school_slug, net_rtg, o_rtg, d_rtg, adj_t)
JOIN core.tournaments t ON t.import_key = 'ncaa-tournament-2019' AND t.deleted_at IS NULL
JOIN core.schools s ON s.slug = v.school_slug AND s.deleted_at IS NULL
JOIN core.teams tm ON tm.tournament_id = t.id AND tm.school_id = s.id AND tm.deleted_at IS NULL
ON CONFLICT (team_id) DO NOTHING;
