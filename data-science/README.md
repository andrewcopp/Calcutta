# Data Science

Python utilities for ML model training, market prediction, entry optimization, and evaluation.

## Setup

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

## Scripts

- `ingest_snapshot.py` — Ingest a snapshot export from the backend admin tools.
- `register_investment_models.py` — Register investment models in `lab.investment_models`.
- `generate_lab_predictions.py` — Generate market predictions for a model across historical calcuttas.
- `optimize_lab_entries.py` — Run portfolio optimization for lab entries.

> **Note**: `naive_ev` and `oracle` predictions are now generated by the Go backend via the lab pipeline worker.

## How to run

### 1) Export + ingest a snapshot

- Generate an API key in the admin console.
- Set it as:

```bash
export CALCUTTA_API_KEY="..."
```

Then ingest:

```bash
python scripts/ingest_snapshot.py \
  --base-url http://localhost:8080 \
  --tournament-id <TOURNAMENT_ID> \
  --calcutta-id <CALCUTTA_ID> \
  --api-key "$CALCUTTA_API_KEY" \
  --out-root ./out \
  --update-latest
```

### 2) Run the lab pipeline

```bash
# Register models
python scripts/register_investment_models.py

# Generate predictions for a model
python scripts/generate_lab_predictions.py --model-name ridge-v1

# Optimize entries
python scripts/optimize_lab_entries.py --model-name ridge-v1
```

## Notes

- This folder intentionally stays lightweight.
- For more context, see `docs/runbooks/data_science_sandbox.md`.
